# TS å¸¸è§ç±»å‹ ğŸ‘Œ

## JS æ•°æ®ç±»å‹

- number
- string
- boolean
- null
- undefined
- symbol
- bigint
- object

## any ç±»å‹

any ç±»å‹å¯ä»¥ç»•è¿‡ç±»å‹æ£€æŸ¥ï¼Œå› æ­¤ï¼Œany ç±»å‹çš„æ•°æ®å¯ä»¥èµ‹å€¼ç»™ä»»æ„ç±»å‹,å½“ç„¶å¦‚æœæ²¡æœ‰çº¦æŸï¼Œä¹Ÿæ²¡æœ‰ç±»å‹æ¨æ–­ï¼Œé‚£è¿™ä¸ªç±»å‹å°±æ˜¯ any ç±»å‹

## å­—é¢é‡ç±»å‹

ç”¨äºä½¿ç”¨ `const` å£°æ˜çš„å˜é‡ä¸èƒ½ä¿®æ”¹ï¼Œå› æ­¤å…¶å£°æ˜çš„å˜é‡å¯¹åº”çš„ç±»å‹å°±æ˜¯å˜é‡çš„å€¼ä¹Ÿå«åšå­—é¢é‡ç±»å‹ã€‚

```ts
const b = "hello";
const c = null;

let d: "hello";
d = "hello";
// d = "world"; // æŠ¥é”™,åªèƒ½èµ‹å€¼ä¸ºhello
```

## è”åˆç±»å‹

```typescript
let v1: string | number | undefined = undefined;
v1 = "hello";
v1 = 123;

let v2: "ç”·" | "å¥³";
v2 = "å¥³";

let v3: "UP" | "DOWN" | "LEFT" | "RIGHT";
v3 = "RIGHT";
```

## æ•°ç»„

æ•°ç»„å¯ä»¥é€šè¿‡`ç±»å‹[]`æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚ `number[]`ã€`string[]`ã€`boolean[]`ç­‰

æ•°ç»„ä¹Ÿå¯ä»¥é€šè¿‡`Array<elemType>`æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚`Array<number>`ã€`Array<string>`ã€`Array<boolean>`ç­‰

```typescript
const arr1 = [1, 2, 3, 4, 5];
const arr2: string[] = ["a", "b", "c", "d", "e"];
const arr3: number[] = [1, 2, 3, 4, 5];
const arr4: Array<number> = [1, 2, 3, 4, 5];
```

ç©ºæ•°ç»„é»˜è®¤æ¨æ–­ä¸º`any[]`,ä¸è¿‡è¿™ä¸ªå’Œ**ç›¸å…³ç±»å‹æ£€æŸ¥æœºåˆ¶æœ‰å…³è”**, `noImplicitAny` ä¸º `true` æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚å½“ `noImplicitAny` ä¸º `false` æ—¶,ç©ºæ•°ç»„çš„ç±»å‹æ¨æ–­ä¸º `never[]`ã€‚

```typescript
const arr5 = [];
arr5.push(123);
arr5.push("123");
```

æ•°ç»„ä¹Ÿèƒ½è”åˆç±»å‹

```typescript
let arr6: (string | number)[] = [1, "2", 3, "4"];
let arr7: Array<string | number> = [1, "2", "3", 4];
// æ³¨æ„å’Œä¸‹é¢å†™æ³•çš„åŒºåˆ«
let arr8: string[] | number[] = [1, 2, 3, 4];
let arr9: Array<string> | Array<number> = ["1", "2", "3", "4"];
```

## å…ƒç»„ç±»å‹(Tuple)

ä¸€ä¸ª**å›ºå®šé•¿åº¦**çš„æ•°ç»„ï¼Œå¹¶ä¸”**æ•°ç»„ä¸­æ¯ä¸€é¡¹çš„ç±»å‹ç¡®å®š**

```typescript
const tuple1: [number, number] = [1, 2];
const tuple2: [number, string] = [1, "2"];
```

**åœºæ™¯:** åœ¨åœ°å›¾ä¸­,ä½¿ç”¨ç»çº¬åº¦åæ ‡æ¥æ ‡è®°ä½ç½®ä¿¡æ¯

å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è®°å½•åæ ‡,é‚£ä¹ˆ,è¯¥æ•°ç»„ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ ,å¹¶ä¸”è¿™ä¸¤ä¸ªå…ƒç´ éƒ½æ˜¯æ•°å€¼ç±»å‹

```ts
let position: number[] = [39.5427, 116.2317];
```

ä½¿ç”¨ `number[]` çš„ç¼ºç‚¹: ä¸ä¸¥è°¨,å› ä¸ºè¯¥ç±»å‹çš„æ•°ç»„ä¸­å¯ä»¥å‡ºç°ä»»æ„å¤šä¸ªæ•°å­—

**æ›´å¥½çš„æ–¹å¼:** å…ƒç»„(Tuple)

å…ƒç»„ç±»å‹æ—¶å¦ä¸€ç§ç±»å‹çš„æ•°ç»„,ä»–ç¡®åˆ‡çš„çŸ¥é“åŒ…å«å¤šå°‘ä¸ªå…ƒç´ ,ä»¥åŠç‰¹å®šç´¢å¼•å¯¹åº”çš„ç±»å‹

```ts
let position: [number, number] = [39.5427, 116.2317];
```

**è§£é‡Š:**

å…ƒç»„ç±»å‹å¯ä»¥ç¡®åˆ‡çš„æ ‡è®°å¤„æœ‰å¤šå°‘ä¸ªå…ƒç´ ,ä»¥åŠæ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚ç¤ºä¾‹ä¸­,å…ƒç´ æœ‰ä¸¤ä¸ªå…ƒç´ ,æ¯ä¸ªå…ƒç´ çš„ç±»å‹éƒ½æ˜¯ number

**å®¹æ˜“æ··æ·†çš„èµ‹å€¼**

```typescript
let tuple3: [] = []; // ç©ºå…ƒç»„

// tuple3 = [1]; //æŠ¥é”™

let value = []; // è¿™æ ·æ‰è¡¨ç¤ºæš‚æ—¶çš„ç©ºæ•°ç»„ï¼Œä¸è¿‡ç±»å‹æ˜¯any[]
```

## å‡½æ•°

å’Œ js çš„åŒºåˆ«æ— éä¹Ÿå°±æ˜¯å¤šäº†**å‚æ•°å’Œè¿”å›å€¼ç±»å‹çš„ç±»å‹å®šä¹‰**

**è¿”å›å€¼ç±»å‹å¯ä»¥è¿›è¡Œæ¨æ–­**ï¼Œå…¶å®å‚æ•°çš„ç±»å‹ä¹Ÿèƒ½å¤Ÿé€šè¿‡ç±»å‹æ£€æŸ¥çš„`"noImplicitAny": false,`é…ç½®è®¾å®šå–æ¶ˆ

```typescript
function add(a: number, b: number): number {
  return a + b;
}

const r = add(1, 2);
```

**å¯é€‰å‚æ•°ä¸é»˜è®¤å‚æ•°**

```typescript
function sum1(a: number, b: number, c?: number) {
  console.log(a, b, c);
}
sum1(3, 4); // 3 4 undefined

// é»˜è®¤å‚æ•°æœ¬èº«å°±æ˜¯å¯é€‰å‚æ•°
function sum2(a: number, b: number, c = 10) {
  console.log(a, b, c);
}
sum2(3, 4); // 3 4 10
```

**å‰©ä½™å‚æ•°**

```typescript
const fn = (a: number, b: number, ...args: number[]) => {
  console.log(a, b, args[0]);
};
```

## void

å‡½æ•°æ²¡æœ‰**æ˜¾å¼çš„è¿”å›å€¼ç±»å‹**ï¼Œä¼šè¢«é»˜è®¤çš„æ¨å¯¼ä¸º`void`

```typescript
function print(): void {
  console.log("1.ç™»å½•");
  console.log("2.æ³¨å†Œ");
}
```

## æ³›å‹

TypeScript ä¸­çš„æ³›å‹æ˜¯ä¸€ç§å·¥å…·ï¼Œå®ƒå…è®¸åœ¨**å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»**æ—¶æä¾›ä¸€ä¸ª**ç±»å‹å˜é‡**ã€‚è¿™ç§ç±»å‹å˜é‡å¯ä»¥è¢«è§†ä¸ºä¸€ç§ç‰¹æ®Šçš„æ ‡è®°ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨ä¸åŒçš„ã€å…·ä½“çš„ç±»å‹ã€‚æ³›å‹æä¾›äº†ä¸€ç§æ–¹å¼æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶ä¿æŒç±»å‹çš„å®‰å…¨æ€§ã€‚

```typescript :collapsed-lines
// æ³›å‹å‡½æ•°
function identity<T>(arg: T): T {
  return arg;
}

let output1 = identity<string>("myString"); // æ˜ç¡®æŒ‡å®šTä¸ºstring
// ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹æ¨æ–­
let output2 = identity("myString"); // ç±»å‹æ¨æ–­ï¼ŒTè¢«æ¨æ–­ä¸ºå­—é¢é‡myString
let output3 = identity(123); // ç±»å‹æ¨æ–­ï¼ŒTè¢«æ¨æ–­ä¸ºå­—é¢é‡123
console.log(output1, output2, output3);
```

```typescript :collapsed-lines
function getTuple<T>(a: T, b: T) {
  return [a, b];
}
const as = getTuple<string>("hello", "world");

function getTuple<T, U>(a: T, b: U): [T, U] {
  return [a, b];
}
const as = getTuple<string, number>("hello", 123);
```

```typescript :collapsed-lines
function myNumberFilter(
  arr: number[],
  callback: (item: number, index?: number) => boolean
): number[] {
  const result = [];
  for (let i = 0; i < arr.length; i++) {
    const item = arr[i];
    if (callback(item)) {
      result.push(item);
    }
  }
  return result;
}
const filterArr1 = myNumberFilter([1, 2, 3, 4, 5], (item) => item % 2 === 0);
console.log(filterArr1);

// ä½¿ç”¨æ³›å‹
function myFilter<T>(
  arr: T[],
  callback: (item: T, index?: number) => boolean
): T[] {
  const result = [];
  for (let i = 0; i < arr.length; i++) {
    const item = arr[i];
    if (callback(item)) {
      result.push(item);
    }
  }
  return result;
}

const filterArr2 = myFilter(["xxx.js", "aaa.java", "bbb.md"], (item) =>
  item.endsWith(".js")
);
console.log(filterArr2);
```

## å¯¹è±¡å­—é¢é‡ç±»å‹

```typescript :collapsed-lines
const obj1 = {
  name: "lily",
  age: 18,
};

// å…¶å®æ˜¯ä¸‹é¢çš„ç®€å†™ï¼š
const obj2: {
  name: string;
  age: number;
} = {
  name: "lily",
  age: 18,
};

// åŒæ ·ï¼Œåœ¨å‡½æ•°ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å­—é¢é‡
function getInfo(user: {
  name: string;
  age: number;
}): { name: string; age: number }[] {
  // todos...
  return [
    {
      name: "lily",
      age: 18,
    },
    {
      name: "lucy",
      age: 20,
    },
  ];
}
```

## è‡ªå®šä¹‰ç±»å‹ï¼šç±»å‹åˆ«åä¸æ¥å£

åœ¨ TS ä¸­ï¼Œ**ç±»å‹åˆ«åï¼ˆType Aliasesï¼‰**å’Œ**æ¥å£ï¼ˆInterfacesï¼‰**æ˜¯ä¸¤ç§å®šä¹‰å¯¹è±¡ç±»å‹çš„æ–¹å¼ã€‚å®ƒä»¬åœ¨å¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥äº’æ¢ä½¿ç”¨ï¼Œä½†å„è‡ªæœ‰å…¶ç‰¹ç‚¹å’Œæœ€ä½³åº”ç”¨åœºæ™¯ã€‚

**ç±»å‹åˆ«å**æ˜¯ä¸€ç§ä¸ºç±»å‹åˆ›å»ºæ–°åç§°çš„æ–¹å¼ï¼Œå°±æ˜¯å–ä¸€ä¸ªæ–°çš„åå­—ã€‚ç±»å‹åˆ«åå¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ç±»å‹ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹ã€è”åˆç±»å‹ã€å…ƒç»„ç­‰

```typescript
// ç±»å‹åˆ«åå®šä¹‰æ–¹å¼
// type TypeName = /* some type */

type Point = {
  x: number;
  y: number;
};

type ID = string | number;

type Age = number;

type User = {
  name: string;
  age: Age;
};

const obj: User = {
  name: "lily",
  age: 18,
};
```

**æ¥å£**æ˜¯é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼Œå› æ­¤å®ƒæ˜¯å®šä¹‰å¯¹è±¡ç»“æ„çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒæè¿°äº†å¯¹è±¡çš„å½¢çŠ¶ï¼Œå³å¯¹è±¡åº”è¯¥æœ‰å“ªäº›å±æ€§ä»¥åŠå±æ€§çš„ç±»å‹ã€‚**æ¥å£ä¸»è¦ç”¨äºå£°æ˜å¯¹è±¡çš„ç»“æ„**

```typescript
// æ¥å£å®šä¹‰æ–¹å¼
interface InterfaceName {
  // structure
}

interface Person {
  id: number;
  name: string;
  age: number;
}

const obj: Person = {
  id: 1,
  name: "lily",
  age: 18,
};
```

æœ‰äº†è‡ªå®šä¹‰çš„ç±»å‹ä¹‹åï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨å‡½æ•°å’Œæ•°ç»„ä¸­ä½¿ç”¨

```typescript
function fn1(user: User) {
  console.log(user.name);
}

const users: User[] = [
  {
    name: "lily",
    age: 18,
  },
  {
    name: "lucy",
    age: 20,
  },
];
```

**ç±»å‹ä¸­çš„å‡½æ•°å£°æ˜ä¸å¯é€‰å±æ€§**

```typescript :collapsed-lines
type InfoFn = (id: number, name?: string) => string;

interface Book {
  id: number;
  name: string;
  price?: number;
  // ä¸¤ç§è¡¨ç¤ºå‡½æ•°çš„æ–¹å¼
  show(id: number): void;
  filter: (id: number) => void;
  info: InfoFn;
  author: User;
}

const book: Book = {
  id: 1,
  name: "javascript",
  show(id: number) {
    console.log(id);
  },
  filter(id: number) {
    console.log(id);
  },
  info(id: number, name?: string) {
    return "hello";
  },
  author: {
    name: "lily",
    age: 18,
  },
};
```

## äº¤å‰ç±»å‹

```typescript :collapsed-lines
type A = {
  id: number;
  name: string;
};
type B = {
  age: number;
};

// å®šä¹‰äº¤å‰ç±»å‹
type C = A & B;
// è¿™æ˜¯è”åˆç±»å‹
type D = A | B;

// æ³¨æ„ç±»å‹Cä¸ç±»å‹Dçš„åŒºåˆ«
/*
const v5: C = {
  id: 1,
  name: "lily",
  // age: 18, //error ç¼ºå°‘ageå±æ€§
}
*/

// v6çš„å–å€¼å¯ä»¥æ˜¯Aæˆ–Bä¹Ÿå¯ä»¥æ˜¯A+B
const v6: D = {
  id: 1,
  name: "lily",
  age: 18,
};
```

## ç±»å‹æ–­è¨€

ç±»å‹æ–­è¨€æ˜¯ä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨â€œæˆ‘çŸ¥é“æˆ‘åœ¨åšä»€ä¹ˆâ€çš„æ–¹å¼ã€‚å…è®¸ä½ å°†ä¸€ä¸ªå˜é‡æŒ‡å®šä¸ºæ›´å…·ä½“æˆ–æ›´å®½æ¾çš„ç±»å‹ã€‚

ç®€å•æ¥è¯´ï¼ŒTS æ ¹æ®å®ƒçš„ç±»å‹æ¨æµ‹ï¼Œå¹¶ä¸èƒ½ç¡®å®šåˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹ã€‚ä½†æ˜¯æˆ‘ä»¬æ˜ç¡®çŸ¥é“ä¸€ä¸ªå€¼çš„ç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±äººä¸ºçš„å¹²æ¶‰ä¸€ä¸‹ã€‚å‘Šè¯‰ TSï¼Œè¿™å°±æ˜¯æŸç§ç±»å‹ï¼Œåˆ«æ€•

**è¯­æ³•:**

- `å€¼ as ç±»å‹`
- `<ç±»å‹>å€¼`

```typescript
let someValue: any = "this is a string";
let strLength1: number = (<string>someValue).length;
// å¦‚æœè¦å†™æ–­è¨€ï¼Œå»ºè®®ç”¨asï¼Œå› ä¸ºä¸Šé¢çš„å½¢å¼åœ¨reactä¸­ä¼šæœ‰æ­§ä¹‰ã€‚å°–æ‹¬å·è¯­æ³•ä¸JSXçš„æ ‡ç­¾è¯­æ³•ç›¸å†²çª
let strLength2: number = (someValue as string).length;
```

**éç©ºæ–­è¨€**

å½“ä½ ç¡®ä¿¡æŸä¸ªå€¼ä¸æ˜¯`null`æˆ–`undefined`æ—¶ï¼Œå¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€

**è¯­æ³•:** `å€¼!`ï¼Œæ¯”å¦‚`someValue!`

```typescript
let maybeString: string | null = "hello";
let definitelyString = maybeString!;
```

```typescript
function getRandom(length?: number) {
  if (!length) {
    return undefined;
  }

  return Math.random().toString(36).slice(-length);
}
let s = getRandom(6);
// å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€
(s as string).charAt(0);
// ç”±äºå°±æ˜¯å­—ç¬¦ä¸²å’Œéç©ºçš„å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€
s!.charAt(0);
```

```typescript :collapsed-lines
type Box = {
  id: number;
  name: string;
};

function getBox(): Box | undefined {
  if (Math.random() > 0.5) {
    return {
      id: 1,
      name: "box1",
    };
  }
  return undefined;
}

function createProduction(box: Box) {
  // todos...
}

createProduction(getBox() as Box);
// éç©ºæ–­è¨€
createProduction(getBox()!);
```

æ¯”å¦‚å¸¸è§çš„ dom æ“ä½œ

```typescript
const inputDom = document.querySelector("input");
inputDom!.addEventListener("change", (e) => {
  console.log((e.target as HTMLInputElement).value);
});
```

> æ‰€æœ‰çš„ DOM ç›¸å…³çš„ç±»å‹å£°æ˜éƒ½åœ¨æ ¸å¿ƒåº“å®šä¹‰æ–‡ä»¶`lib.dom.d.ts`ä¸­ï¼Œè¦æŸ¥æ‰¾ç›¸å…³çš„ Elementï¼Œå¯ä»¥æŸ¥çœ‹ i**nterface HTMLElementTagNameMap**

## å¯é€‰é“¾æ“ä½œç¬¦

æ³¨æ„ï¼Œ**å¯é€‰é“¾æ“ä½œç¬¦æ˜¯ ES2020 æ–°çš„è¯­æ³•ç‰¹æ€§ï¼ˆnode 14 ä»¥ä¸Šï¼‰ï¼Œå¹¶ä¸æ˜¯ TS çš„æ–°ç‰¹æ€§**

å¯é€‰é“¾æ“ä½œç¬¦ `?.` ä½¿å¾—æˆ‘ä»¬åœ¨å°è¯•è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æ˜¯ `undefined` æˆ– `null`ï¼Œä¸ä¼šå¼•å‘é”™è¯¯ï¼Œè€Œæ˜¯ä¼šè¿”å› `undefined`ã€‚è¿™æ ·å¯ä»¥é¿å…ä½¿ç”¨å†—é•¿çš„æ¡ä»¶è¯­å¥æ¥æ£€æŸ¥å¯¹è±¡çš„æ¯ä¸ªå±‚çº§ã€‚

```typescript :collapsed-lines
interface Address {
  street?: string;
  city?: string;
}

interface Student {
  name: string;
  address?: Address;
}

let student: Student = {
  name: "Rose",
  address: {
    city: "ä¸Šæµ·",
    // æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æä¾›streetå±æ€§
  },
};

// ä½¿ç”¨å¯é€‰é“¾å®‰å…¨åœ°è®¿é—®streetå±æ€§
let street = student.address?.street; // streetå°†ä¸ºundefinedï¼Œä½†ä¸ä¼šæŠ›å‡ºé”™è¯¯

console.log(street); // è¾“å‡º undefined
```
