# âœ¨ çŠ¶æ€ç®¡ç†åº“ ğŸ‘Œ

[[TOC]]

::: info å¿«é€Ÿæ€»è§ˆ

- çŠ¶æ€ç®¡ç†ç”¨äºé›†ä¸­ç®¡ç†ç»„ä»¶é—´å…±äº«çš„çŠ¶æ€ï¼Œé¿å…å¤šå±‚çº§æ‰‹åŠ¨ä¼ é€’ã€‚
- Vue å®˜æ–¹æ¨èä½¿ç”¨ Piniaï¼ˆæ›¿ä»£ Vuexï¼‰ï¼ŒAPI æ›´ç®€å•ã€ç±»å‹æ¨æ–­æ›´å¥½ã€‚
- æ ¸å¿ƒæ¦‚å¿µï¼š`store`ï¼ˆæ•°æ®ä»“åº“ï¼‰ã€`state`ã€`getters`ã€`actions`ã€‚
- å¸¸è§åœºæ™¯ï¼šè·¨é¡µé¢å…±äº«æ•°æ®ã€å¤æ‚ä¸šåŠ¡çŠ¶æ€ã€æŒä¹…åŒ–ä¸æ’ä»¶æ‰©å±•ã€‚
  :::

## çŠ¶æ€ç®¡ç†åº“åŸºæœ¬ä»‹ç»

æ‰€è°“çŠ¶æ€ç®¡ç†åº“ï¼Œå°±æ˜¯ç”¨äº**ç®¡ç†ä¸€ä¸ªåº”ç”¨ä¸­ç»„ä»¶çš„çŠ¶æ€**çš„ã€‚

ä¼ ç»Ÿæ–¹å¼ç»„ä»¶ä¹‹é—´ä¼ é€’çŠ¶æ€:

- çˆ¶ä¼ å­ç”¨ Props
- å­ä¼ çˆ¶ç”¨ Emit

è¿™ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜ï¼Ÿ

å¦‚æœä½ çš„åº”ç”¨çš„è§„æ¨¡ä¸€æ—¦æ…¢æ…¢å˜å¤§ï¼Œé‚£ä¹ˆä¸åŒå±‚çº§ä¹‹é—´ç»„ä»¶çš„çŠ¶æ€ä¼ é€’ï¼Œå°±ä¼šå˜å¾—éå¸¸çš„éº»çƒ¦ã€‚

![](https://bu.dusays.com/2025/11/04/6909ca407e47d.jpg)

çŠ¶æ€ç®¡ç†åº“å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Ÿ

åœ¨çŠ¶æ€ç®¡ç†åº“ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªç»Ÿä¸€çš„åœ°æ–¹ï¼ˆæ•°æ®ä»“åº“ï¼‰ç®¡ç†æ‰€æœ‰çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™ç»„ä»¶ä¹‹é—´è¦è¿›è¡ŒçŠ¶æ€çš„ä¼ é€’ï¼Œåªéœ€è¦ä¸€ä¸ªç»„ä»¶å°†çŠ¶æ€æäº¤åˆ°ä»“åº“ï¼Œç„¶åå¦ä¸€ä¸ªç»„ä»¶ä»ä»“åº“è·å–æœ€æ–°çš„çŠ¶æ€å³å¯ã€‚

![](https://bu.dusays.com/2025/11/04/6909ca599df0f.jpg)

::: tip ä½•æ—¶éœ€è¦çŠ¶æ€ç®¡ç†ï¼Ÿ

- å±‚çº§è¾ƒæ·±ã€å…„å¼Ÿ/è·¨é¡µé¢ç»„ä»¶é¢‘ç¹å…±äº«æ•°æ®æ—¶ã€‚
- äº‹ä»¶ä¸æ•°æ®æµå˜å¤æ‚ã€è°ƒè¯•æˆæœ¬é«˜æ—¶ã€‚
- éœ€è¦ç»Ÿä¸€çš„è¡Œä¸ºæ—¥å¿—ã€æŒä¹…åŒ–ã€æˆ–ä¸æœåŠ¡ç«¯çŠ¶æ€åŒæ­¥æ—¶ã€‚
  :::

## Vue ç”Ÿæ€çš„çŠ¶æ€ç®¡ç†åº“

ç›®å‰ï¼ŒVue ç”Ÿæ€å®˜æ–¹æ‰€æ¨èçš„çŠ¶æ€ç®¡ç†åº“æ˜¯ Piniaï¼Œè¿™æ˜¯ç›®å‰æœ€æ–°çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºæ›¿ä»£ä»¥å‰çš„ Vuex çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿæ˜¯ä»¥ Pinia ä¸ºä¸»ï¼Œä»‹ç»è¿™ä¸ªæœ€æ–°çš„çŠ¶æ€ç®¡ç†åº“ã€‚

Pinia ï¼Œå‘éŸ³ä¸º /piËnjÊŒ/ï¼Œæ¥æºäºè¥¿ç­ç‰™è¯­ piÃ±a ã€‚æ„æ€ä¸ºè èï¼Œè¡¨ç¤ºä¸è èä¸€æ ·ï¼Œç”±å¾ˆå¤šå°å—ç»„æˆã€‚åœ¨ Pinia ä¸­ï¼Œ**æ¯ä¸ª Store éƒ½æ˜¯å•ç‹¬å­˜åœ¨**ï¼Œä¸€åŒè¿›è¡ŒçŠ¶æ€ç®¡ç†ã€‚

Pinia æ˜¯ç”± Vue.js å›¢é˜Ÿæˆå‘˜å¼€å‘ï¼Œæœ€åˆæ˜¯åœ¨ 2019 å¹´ 11 æœˆå·¦å³ä½œä¸º**ä¸€é¡¹å®éªŒæ€§å·¥ä½œ**æå‡ºçš„ï¼Œç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨ Composition API é‡æ–°è®¾è®¡ Vuexï¼Œæ¢ç´¢ Vuex ä¸‹ä¸€æ¬¡è¿­ä»£ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚ä½†æ˜¯ Pinia åœ¨è®¾è®¡ä¹‹åˆå°±å€¾å‘äºåŒæ—¶æ”¯æŒ Vue 2 å’Œ Vue 3ï¼Œå¹¶ä¸”ä¸å¼ºåˆ¶è¦æ±‚å¼€å‘è€…ä½¿ç”¨ç»„åˆå¼ APIã€‚åœ¨æ¢ç´¢çš„è¿‡ç¨‹ä¸­ï¼ŒPinia å®ç°äº† Vuex5 ææ¡ˆçš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œäºæ˜¯å°±ç›´æ¥å–è€Œä»£ä¹‹äº†ã€‚

ç›®å‰ Vue å®˜æ–¹å·²ç»å®£å¸ƒ Pinia å°±æ˜¯æ–°ä¸€ä»£çš„ Vuexï¼Œä½†æ˜¯ä¸ºäº†å°Šé‡ä½œè€…æœ¬äººï¼Œåå­—ä¿æŒä¸å˜ï¼Œä»ç„¶å«åš Piniaã€‚

ä¸ä¹‹å‰çš„ Vuex ç›¸æ¯”ï¼ŒPinia æä¾›äº†æ›´ç®€å•çš„ APIï¼Œæ›´å°‘çš„è§„èŒƒï¼Œä»¥åŠ _Composition-API_ é£æ ¼çš„ API ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä¸ _TypeScript_ ä¸€èµ·ä½¿ç”¨å…·æœ‰å¯é çš„ç±»å‹æ¨æ–­æ”¯æŒã€‚

Pinia å®˜ç½‘åœ°å€ï¼šhttps://pinia.vuejs.org/

![](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2023-03-21-093840.png)

å¯¹æ¯”ä¹‹å‰çš„ Vuexï¼ŒPinia å…·æœ‰å¦‚ä¸‹çš„ç‰¹ç‚¹ï¼š

1. **mutations ä¸å¤å­˜åœ¨**ã€‚åªæœ‰ state ã€getters ã€actions
2. actions ä¸­æ”¯æŒ**åŒæ­¥**å’Œ**å¼‚æ­¥**æ–¹æ³•ä¿®æ”¹ state çŠ¶æ€
3. ä¸ TypeScript ä¸€èµ·ä½¿ç”¨å…·æœ‰å¯é çš„ç±»å‹æ¨æ–­æ”¯æŒ
4. **ä¸å†æœ‰æ¨¡å—åµŒå¥—**ï¼Œåªæœ‰ Store çš„æ¦‚å¿µï¼ŒStore ä¹‹é—´å¯ä»¥ç›¸äº’è°ƒç”¨
5. **æ”¯æŒæ’ä»¶æ‰©å±•**ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿å®ç°æœ¬åœ°å­˜å‚¨ç­‰åŠŸèƒ½
6. æ›´åŠ **è½»é‡**ï¼Œå‹ç¼©åä½“ç§¯åªæœ‰ 2kb å·¦å³

## å¿«é€Ÿå…¥é—¨ï¼ˆ3 æ­¥ï¼‰

1. å®‰è£…ä¾èµ–

```bash
npm i pinia
```

2. åœ¨å…¥å£æŒ‚è½½ Pinia

```js
import { createApp } from "vue";
import App from "./App.vue";
import { createPinia } from "pinia";

const app = createApp(App);
app.use(createPinia()).mount("#app");
```

3. åˆ›å»ºä¸ä½¿ç”¨ Store

åœ¨ `src/stores` ç›®å½•åˆ›å»ºæ•°æ®ä»“åº“ã€‚å‘½åçº¦å®šå¸¸ç”¨ `useXxxStore`ï¼š

```js
// é€‰é¡¹å¼ Store
import { defineStore } from "pinia";

export const useCounterStore = defineStore("counter", {
  state: () => ({ count: 0 }),
  getters: {
    double: (state) => state.count * 2,
  },
  actions: {
    increment() {
      this.count++;
    },
    decrement() {
      this.count--;
    },
  },
});
```

```js
// ç»„åˆå¼ Storeï¼ˆæ¨èä¸ç»„åˆå¼ API æ­é…ï¼‰
import { defineStore } from "pinia";
import { ref, computed } from "vue";

export const useCounterStore = defineStore("counter", () => {
  const count = ref(0);
  const double = computed(() => count.value * 2);

  const increment = () => {
    count.value++;
  };
  const decrement = () => {
    count.value--;
  };

  return { count, double, increment, decrement };
});
```

é€šè¿‡ `defineStore` æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®ä»“åº“ï¼š

- ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä»“åº“åç§°ï¼ˆå­—ç¬¦ä¸²æ ‡è¯†ï¼Œå‚ä¸ DevTools å±•ç¤ºä¸æŒä¹…åŒ–é”®åï¼‰ã€‚
- ç¬¬äºŒä¸ªå‚æ•°ä¸ºé…ç½®å¯¹è±¡æˆ– `setup` å›è°ƒï¼Œå¯å®šä¹‰ `state/getters/actions` æˆ–ä»¥ç»„åˆå¼æ–¹å¼è¿”å›ã€‚

æœ€ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Storeï¼š

```vue
<template>
  <div class="counter">
    <h1>è®¡æ•°å™¨ï¼š{{ counterStore.count }}ï¼ˆx2: {{ counterStore.double }}ï¼‰</h1>
    <button @click="counterStore.increment">å¢åŠ </button>
    <button @click="counterStore.decrement">å‡å°‘</button>
  </div>
</template>

<script setup>
import { useCounterStore } from "./stores/useCounterStore.js";
const counterStore = useCounterStore();
</script>

<style scoped>
.counter {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
button {
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}
</style>
```

::: tip ç›®å½•ä¸å‘½åçº¦å®š

- Store æ–‡ä»¶å»ºè®®æ”¾åœ¨ `src/stores`ï¼Œå‘½åä½¿ç”¨ `useXxxStore`ã€‚
- é€‰é¡¹å¼ Store æ›´æ¥è¿‘ Vuex å¿ƒæ™ºæ¨¡å‹ï¼Œç»„åˆå¼ Store ä¸ç»„åˆå¼ API æ›´è‡ªç„¶ã€‚
- éœ€è¦æŒä¹…åŒ–å¯é€šè¿‡æ’ä»¶æˆ–æ‰‹åŠ¨ `localStorage`/`IndexedDB`ï¼›æ³¨æ„åºåˆ—åŒ–ä¸å®‰å…¨ã€‚
  :::

::: warning å¸¸è§å‘

- å¿˜è®°åœ¨å…¥å£é€šè¿‡ `app.use(createPinia())` å®‰è£… Piniaã€‚
- ç›´æ¥åœ¨ç»„ä»¶å¤–éƒ¨ä½¿ç”¨ `useXxxStore()` å¯¼è‡´å…±äº«å®ä¾‹ä¸æµ‹è¯•å›°éš¾ï¼ˆå»ºè®®ä»…åœ¨ `setup` æˆ–ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨ï¼‰ã€‚
- é‡æ„è·¯å¾„åå¯¼å…¥åˆ«åé”™è¯¯ï¼Œå»ºè®®ä¿æŒä¸€è‡´çš„ `@/stores` æˆ–ç›¸å¯¹è·¯å¾„è§„èŒƒã€‚
  :::
