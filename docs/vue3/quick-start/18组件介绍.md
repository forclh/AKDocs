# ç»„ä»¶ä»‹ç»

- ç»„ä»¶ç»“æ„
- ç»„ä»¶æ³¨å†Œ
- ç»„ä»¶å

## ç»„ä»¶ç»“æ„

åœ¨ Vue ä¸­æ”¯æŒ**å•æ–‡ä»¶ç»„ä»¶**ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªç»„ä»¶ï¼Œè¿™æ ·çš„æ–‡ä»¶ä»¥ .vue ä½œä¸ºåç¼€ã€‚

ä¸€ä¸ªç»„ä»¶ä¼šåŒ…å«å®Œæ•´çš„ä¸€å¥—ç»“æ„ã€æ ·å¼ä»¥åŠé€»è¾‘

```jsx
<template>
  <button @click="count++">Count is: {{ count }}</button>
</template>

<script setup>
import { ref } from 'vue'
const count = ref(0)
</script>

<style scoped>
button{
  padding: 15px;
}
</style>
```

**setup**

åœ¨ Vue3 åˆæœŸï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«æ¨¡æ¿ä¸­è¦ç”¨åˆ°çš„æ•°æ®çŠ¶æ€ä»¥åŠæ–¹æ³•ã€‚

```jsx
import { ref } from 'vue'
export default {
  setup() {
    // åœ¨è¿™é‡Œé¢å®šæ•°æ®å’Œæ–¹æ³•
    const count = ref(0)
    function add() {
      count.value++
    }
    return {
      count,
      add
    }
  }
}
```

ä» Vue3.2 ç‰ˆæœ¬å¼€å§‹ï¼Œæ¨å‡ºäº† setup æ ‡ç­¾ï¼Œæ‰€æœ‰å®šä¹‰çš„æ•°æ®çŠ¶æ€ä»¥åŠæ–¹æ³•éƒ½ä¼šè‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ä½¿ç”¨ï¼Œä»è€Œå‡å°‘äº†æ ·æ¿ä»£ç ã€‚

å¦å¤– setup æ ‡ç­¾è¯­æ³•è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å¥½å¤„ï¼š

- æœ‰æ›´å¥½çš„ç±»å‹æ¨æ–­(TS)
- æ”¯æŒé¡¶çº§ await

**scoped**

å®šä¹‰ç»„ä»¶ç§æœ‰çš„ CSS æ ·å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å†™çš„æ ·å¼åªå¯¹å½“å‰ç»„ä»¶ç”Ÿæ•ˆã€‚å¦‚æœä¸ä¹¦å†™ scopedï¼Œé‚£ä¹ˆæ ·å¼å°±æ˜¯å…¨å±€ç”Ÿæ•ˆã€‚

é™¤äº†å•æ–‡ä»¶ç»„ä»¶çš„å½¢å¼æ¥å®šä¹‰ç»„ä»¶å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¯¹è±¡çš„å½¢å¼æ¥å®šä¹‰ç»„ä»¶ï¼š

```jsx
export default {
  setup(){
    // å®šä¹‰æ•°æ®
    const count = ref(0)
    return { count }
  },
  template: `<div>{{count}}</div>`
}
```

ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>
    <template id="my-template-element">
        <div>
            <h1>{{ count }}</h1>
            <button @click="count++">Increment</button>
        </div>
    </template>
    <script src="https://unpkg.com/vue@3.2.31"></script>
    <script>
      const { createApp, ref } = Vue;
      const App = {
        setup() {
          const count = ref(0);
          return { count };
        },
        template: "#my-template-element",
      };
      createApp(App).mount("#app");
    </script>
  </body>
</html>

```

## ç»„ä»¶æ³¨å†Œ

ç»„ä»¶æ³¨å†Œåˆ†ä¸ºä¸¤ç§ï¼š

- å…¨å±€æ³¨å†Œ
- å±€éƒ¨æ³¨å†Œ

**å…¨å±€æ³¨å†Œ**

ä½¿ç”¨ Vue åº”ç”¨å®ä¾‹çš„ .component( ) æ–¹æ³•æ¥å…¨å±€æ³¨å†Œç»„ä»¶ï¼Œæ‰€æ³¨å†Œçš„ç»„ä»¶å…¨å±€å¯ç”¨ã€‚

```jsx
import { createApp } from 'vue'

const app = createApp({})

app.component(
  // æ³¨å†Œçš„åå­—
  'MyComponent',
  // ç»„ä»¶çš„å®ç°
  {
    /* ... */
  }
)
```

```jsx
import MyComponent from './App.vue'
app.component('MyComponent', MyComponent)
```

Component æ–¹æ³•æ˜¯å¯ä»¥é“¾å¼è°ƒç”¨çš„

```jsx
app
  .component('ComponentA', ComponentA)
  .component('ComponentB', ComponentB)
  .component('ComponentC', ComponentC)
```

**å±€éƒ¨æ³¨å†Œ**

å±€éƒ¨æ³¨å†Œå°±æ˜¯åœ¨å“ªä¸ªç»„ä»¶é‡Œé¢ç”¨åˆ°äº† TestCom è¿™ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆå°±åœ¨å½“å‰çš„ç»„ä»¶é‡Œé¢å¼•å…¥å®ƒï¼Œç„¶åé€šè¿‡ components é…ç½®é¡¹è¿›è¡Œæ³¨å†Œä¸€ä¸‹å³å¯ã€‚

```jsx
<template>
  <button @click="add">Count is: {{ count }}</button>
  <TestCom />
</template>

<script>
import { ref } from 'vue'
import TestCom from './components/TestCom.vue'
export default {
  // å±€éƒ¨æ³¨å†Œ
  components: {
    TestCom
  },
  setup() {
    // åœ¨è¿™é‡Œé¢å®šæ•°æ®å’Œæ–¹æ³•
    const count = ref(0)
    function add() {
      count.value++
    }
    return {
      count,
      add
    }
  }
}
</script>

<style scoped>
button {
  padding: 15px;
}
</style>
```

å¦‚æœæ˜¯ setup æ ‡ç­¾è¯­æ³•ç³–ï¼Œé‚£ä¹ˆåªéœ€è¦å¯¼å…¥ç»„ä»¶å³å¯ï¼Œä¸éœ€è¦ä½¿ç”¨ components é…ç½®é¡¹æ¥è¿›è¡Œæ³¨å†Œï¼Œå› ä¸ºå¯¼å…¥ååœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨æ³¨å†Œï¼š

```jsx
<template>
  <button @click="add">Count is: {{ count }}</button>
  <TestCom />
</template>

<script setup>
import { ref } from 'vue'
import TestCom from './components/TestCom.vue'
// åœ¨è¿™é‡Œé¢å®šæ•°æ®å’Œæ–¹æ³•
const count = ref(0)
function add() {
  count.value++
}
</script>

<style scoped>
button {
  padding: 15px;
}
</style>
```

å®é™…å¼€å‘çš„æ—¶å€™ï¼Œ**æ¨èä½¿ç”¨å±€éƒ¨æ³¨å†Œ**

1. å…¨å±€æ³¨å†Œæ— æ³•å¾ˆå¥½çš„ tree-shaking
2. å…¨å±€æ³¨å†Œçš„ç»„ä»¶åœ¨å¤§å‹é¡¹ç›®ä¸­æ— æ³•å¾ˆå¥½çš„çœ‹å‡ºç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»

<aside>
ğŸ’¡

Tree-shaking æ˜¯ä¸€ç§ä»£ç ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼ˆå³â€œæ­»ä»£ç â€ï¼‰ã€‚è¿™ä¸ªæœ¯è¯­æ¥æºäºå¤„ç†æ ‘å½¢æ•°æ®ç»“æ„æ—¶ï¼Œé€šè¿‡ä¿®å‰ªï¼ˆshakingï¼‰æ ‘çš„æå¶æ¥å»æ‰ä¸éœ€è¦çš„éƒ¨åˆ†ï¼Œä»è€Œä½¿æ ‘æ›´ç²¾ç®€

</aside>

## ç»„ä»¶å

æ¨èä½¿ç”¨**å¤§é©¼å³°**ä½œä¸ºç»„ä»¶åã€‚

> ä½†æ˜¯å¤§é©¼å³°åœ¨ DOM å†…æ¨¡æ¿ä¸­æ— æ³•ä½¿ç”¨
> 

ç»„ä»¶åœ¨åº”ç”¨å±‚é¢ï¼Œæœ‰ä¸‰ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š

1. Props
2. è‡ªå®šä¹‰äº‹ä»¶
3. æ’æ§½
