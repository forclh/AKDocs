# ✨ 常规流 👌

## 1. 基本概念

盒模型：规定单个盒子的规则

视觉格式化模型（布局规则）：页面中的多个盒子排列规则

视觉格式化模型，大体上将页面中盒子的排列分为三种方式：

1. 常规流
2. 浮动
3. 定位

## 2. 常规流布局

常规流也叫文档流、普通文档流、常规文档流

**所有元素，默认情况下，都属于常规流布局**

**总体规则：块盒独占一行，行盒水平依次排列**

### 2.1. 包含块（containing block）

**包含块（containing block）**：每个盒子都有它的包含块，**包含块决定了盒子的排列区域**。

绝大部分情况下：盒子的包含块，**为其父元素的内容盒**

### 2.2. 块盒

#### 2.2.1. 宽度计算规则

每个块盒的总宽度(内容+padding+border+margin)，必须刚好等于包含块的宽度

宽度的默认值是 auto，margin 的取值也可以是 auto，默认值 0（这里的 auto 表示将剩余空间吸收掉），**width 吸收能力强于 margin**

若宽度、边框、内边距、外边距计算后，仍然有剩余空间，该剩余空间被 margin-right 全部吸收

**在常规流中，块盒在其包含块中居中，可以定宽、然后左右 margin 设置为 auto。**

```css:collapsed-lines
/* 块级元素水平居中示例 */
.center-block {
  width: 80%; /* 或任何固定宽度 */
  margin-left: auto;
  margin-right: auto;
}
```

#### 2.2.2. 垂直方向上的 auto 值

```css :collapsed-lines
/* 垂直方向auto值示例 */
.auto-height {
  height: auto; /* 会自动适应内容高度 */
}

.auto-margin-vertical {
  margin-top: auto; /* 实际等同于margin-top: 0 */
  margin-bottom: auto; /* 实际等同于margin-bottom: 0 */
}
```

#### 2.2.3. 百分比取值

width、padding（四个方向）、margin（四个方向） 可以取值为百分比，表示**相对于包含块的宽度。**

```css:collapsed-lines
/* 百分比取值示例 */
.percentage-example {
  width: 50%; /* 包含块宽度的50% */
  padding-left: 10%; /* 包含块宽度的10% */
  margin-right: 5%; /* 包含块宽度的5% */
}
```

高度的百分比：

1. 包含块的高度**取决于子元素的高度**，设置百分比无效
2. 包含块的高度**不取决于子元素的高度**，百分比相对于**包含块高度**

```css:collapsed-lines
/* 高度百分比示例 */
.parent {
  height: 200px; /* 固定高度 */
}

.child {
  height: 50%; /* 父元素高度的50%，即100px */
}

/* 当父元素高度由内容决定时 */
.auto-height-parent {
  /* 高度由内容决定 */
}

.child-percentage {
  height: 50%; /* 无效，因为父元素高度不确定 */
}
```

#### 2.2.4. 上下外边距的合并

两个常规流块盒，上下外边距**相邻**（父子元素、兄弟元素），会进行合并。两个外边距取**最大值**。

```css:collapsed-lines
/* 外边距合并示例 */
.box1 {
  margin-bottom: 20px;
}

.box2 {
  margin-top: 30px;
}
/* 两个盒子之间的实际间距是30px，而不是50px */
```

## 3. 最佳实践

### 3.1. 盒模型选择

为了更直观地控制元素尺寸，建议使用 `box-sizing: border-box`：

```css:collapsed-lines
/* 全局应用border-box */
* {
  box-sizing: border-box;
}
```

### 3.2. 避免外边距合并问题

当不希望发生外边距合并时，可以：

- 使用 padding 代替 margin
- 在父元素上添加 border 或 padding
- 使用 overflow: hidden 创建 BFC

```css:collapsed-lines
/* 防止外边距合并 */
.parent {
  padding-top: 1px; /* 防止子元素margin-top穿透 */
  padding-bottom: 1px; /* 防止子元素margin-bottom穿透 */
}
```

### 3.3. 响应式设计考虑

在常规流中使用百分比和媒体查询实现响应式布局：

```css:collapsed-lines
/* 响应式布局示例 */
.container {
  width: 90%;
  max-width: 1200px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .container {
    width: 95%;
  }
}
```
