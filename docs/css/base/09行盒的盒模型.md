# ✨ 行盒的盒模型 👌

[[TOC]]

## 1. 概述

行盒（inline box）是 CSS 盒模型中的一种重要类型，与块盒（block box）相比具有独特的特性和行为。理解行盒的盒模型对于掌握 CSS 布局和文本排版至关重要。

## 2. 行盒的基本概念

### 2.1 什么是行盒

行盒是指那些在页面中不独占一行，而是与其他内容在同一行内排列的元素所形成的盒子。行盒通常包含具体的文本内容或行内元素。

### 2.2 常见的行盒元素

```html :collapsed-lines
<!-- 常见的行盒元素 -->
<span>行内文本</span>
<strong>加粗文本</strong>
<em>斜体文本</em>
<i>斜体标记</i>
<a href="#">链接</a>
<code>代码片段</code>
<small>小号文本</small>
<sub>下标</sub>
<sup>上标</sup>

<!-- 可替换的行盒元素 -->
<img src="image.jpg" alt="图片" />
<input type="text" placeholder="输入框" />
<button>按钮</button>
<select>
  <option>选择框</option>
</select>
```

## 3. 行盒的显著特点

### 3.1 盒子沿着内容延伸

行盒的尺寸完全由其内容决定，不能通过 CSS 直接设置固定的宽度和高度。

```html :collapsed-lines
<!-- HTML 示例 -->
<span class="short-content">短</span>
<span class="long-content">这是一段比较长的文本内容</span>
```

```css :collapsed-lines
/* CSS 示例 */
.short-content {
  background-color: #ffeb3b;
  /* 盒子宽度由"短"字决定 */
}

.long-content {
  background-color: #4caf50;
  /* 盒子宽度由整段文本决定 */
}

/* 行盒会根据内容自动调整尺寸 */
.dynamic-content {
  background-color: #2196f3;
  color: white;
  /* 无论内容多少，盒子都会自适应 */
}
```

### 3.2 行盒不能设置宽高

这是行盒最重要的特性之一，直接设置 `width` 和 `height` 属性对行盒无效。

```css :collapsed-lines
/* 无效的行盒样式设置 */
.invalid-inline-styles {
  display: inline;
  width: 200px; /* 无效！行盒忽略此属性 */
  height: 100px; /* 无效！行盒忽略此属性 */
  background-color: #f44336;
}

/* 正确的行盒尺寸调整方法 */
.correct-inline-sizing {
  display: inline;
  font-size: 18px; /* 通过字体大小调整高度 */
  line-height: 1.5; /* 通过行高调整垂直空间 */
  font-family: "Arial"; /* 通过字体类型影响尺寸 */
  letter-spacing: 2px; /* 通过字符间距调整宽度 */
  padding: 0 10px; /* 通过内边距调整水平空间 */
}
```

### 3.3 内边距（填充区）的特殊行为

行盒的内边距在水平和垂直方向上表现不同：水平方向有效，垂直方向不会实际占据空间。

```css :collapsed-lines
/* 行盒内边距的特殊行为 */
.inline-padding {
  display: inline;
  background-color: #e3f2fd;

  /* 水平内边距：正常工作，影响布局 */
  padding-left: 20px; /* 有效，推开左侧内容 */
  padding-right: 20px; /* 有效，推开右侧内容 */

  /* 垂直内边距：视觉存在，但不占据空间 */
  padding-top: 15px; /* 视觉上存在，但不推开上方内容 */
  padding-bottom: 15px; /* 视觉上存在，但不推开下方内容 */
}

/* 演示内边距效果的容器 */
.padding-demo {
  line-height: 2;
  border: 1px solid #ccc;
}

.padding-demo .inline-element {
  background-color: rgba(255, 193, 7, 0.3);
  padding: 10px 15px;
  border: 2px solid #ff9800;
}
```

### 3.4 边框的特殊行为

与内边距类似，行盒的边框在垂直方向不会影响布局。

```css :collapsed-lines
/* 行盒边框的特殊行为 */
.inline-border {
  display: inline;
  background-color: #fff3e0;

  /* 水平边框：正常工作，影响布局 */
  border-left: 3px solid #ff5722; /* 有效，推开左侧内容 */
  border-right: 3px solid #ff5722; /* 有效，推开右侧内容 */

  /* 垂直边框：视觉存在，但不占据空间 */
  border-top: 3px solid #ff5722; /* 视觉存在，不推开上方内容 */
  border-bottom: 3px solid #ff5722; /* 视觉存在，不推开下方内容 */
}
```

### 3.5 外边距的特殊行为

行盒的外边距行为与内边距和边框一致。

```css :collapsed-lines
/* 行盒外边距的特殊行为 */
.inline-margin {
  display: inline;
  background-color: #f3e5f5;

  /* 水平外边距：正常工作，影响布局 */
  margin-left: 25px; /* 有效，与左侧内容产生间距 */
  margin-right: 25px; /* 有效，与右侧内容产生间距 */

  /* 垂直外边距：完全无效 */
  margin-top: 20px; /* 无效，不产生任何效果 */
  margin-bottom: 20px; /* 无效，不产生任何效果 */
}

/* 外边距合并在行盒中不适用 */
.margin-demo {
  display: inline;
  margin-right: 10px;
  background-color: #ffcdd2;
}

.margin-demo + .margin-demo {
  margin-left: 15px;
  /* 两个外边距会累加：10px + 15px = 25px */
}
```

## 4. 行块盒（Inline-Block）

### 4.1 行块盒的概念

行块盒是一种特殊的盒子类型，结合了行盒和块盒的特性。它既不独占一行（像行盒），又可以设置所有的盒模型属性（像块盒）。

```css :collapsed-lines
/* 创建行块盒 */
.inline-block-element {
  display: inline-block;

  /* 可以设置所有盒模型属性 */
  width: 150px;
  height: 100px;
  padding: 15px;
  border: 2px solid #2196f3;
  margin: 10px;

  background-color: #e3f2fd;
  text-align: center;
  vertical-align: top;
}
```

### 4.2 行块盒的显著特点

#### 4.2.1 不独占一行

```html :collapsed-lines
<!-- 行块盒可以在同一行排列 -->
<div class="container">
  <div class="inline-block-item">项目1</div>
  <div class="inline-block-item">项目2</div>
  <div class="inline-block-item">项目3</div>
</div>
```

```css :collapsed-lines
.inline-block-item {
  display: inline-block;
  width: 100px;
  height: 80px;
  background-color: #4caf50;
  color: white;
  text-align: center;
  line-height: 80px;
  margin: 5px;
  border-radius: 4px;
}
```

#### 4.2.2 盒模型中所有尺寸都有效

```css :collapsed-lines
/* 行块盒的完整盒模型 */
.full-box-model {
  display: inline-block;

  /* 尺寸属性：完全有效 */
  width: 200px;
  height: 120px;
  min-width: 150px;
  max-width: 300px;
  min-height: 100px;
  max-height: 200px;

  /* 内边距：水平和垂直都有效 */
  padding: 20px 15px;

  /* 边框：水平和垂直都有效 */
  border: 3px solid #ff9800;
  border-radius: 8px;

  /* 外边距：水平和垂直都有效 */
  margin: 15px 10px;

  /* 背景和其他样式 */
  background-color: #fff3e0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
```

### 4.3 行块盒的实际应用

#### 4.3.1 导航菜单

```html :collapsed-lines
<!-- 水平导航菜单 -->
<nav class="horizontal-nav">
  <a href="#" class="nav-item">首页</a>
  <a href="#" class="nav-item">产品</a>
  <a href="#" class="nav-item">服务</a>
  <a href="#" class="nav-item">关于我们</a>
  <a href="#" class="nav-item">联系我们</a>
</nav>
```

```css :collapsed-lines
.horizontal-nav {
  background-color: #333;
  padding: 0;
  text-align: center;
}

.nav-item {
  display: inline-block;
  padding: 15px 20px;
  color: white;
  text-decoration: none;
  border-right: 1px solid #555;
  transition: background-color 0.3s;
}

.nav-item:hover {
  background-color: #555;
}

.nav-item:last-child {
  border-right: none;
}
```

#### 4.3.2 卡片网格

```html :collapsed-lines
<!-- 卡片网格布局 -->
<div class="card-grid">
  <div class="card">卡片1</div>
  <div class="card">卡片2</div>
  <div class="card">卡片3</div>
  <div class="card">卡片4</div>
</div>
```

```css :collapsed-lines
.card-grid {
  text-align: center;
  font-size: 0; /* 消除inline-block间隙 */
}

.card {
  display: inline-block;
  width: 200px;
  height: 150px;
  margin: 10px;
  padding: 20px;
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 8px;
  font-size: 16px; /* 恢复字体大小 */
  vertical-align: top;
  box-sizing: border-box;
}
```

#### 4.3.3 按钮组

```html :collapsed-lines
<!-- 按钮组 -->
<div class="button-group">
  <button class="btn btn-primary">确定</button>
  <button class="btn btn-secondary">取消</button>
  <button class="btn btn-danger">删除</button>
</div>
```

```css :collapsed-lines
.button-group {
  text-align: center;
  margin: 20px 0;
}

.btn {
  display: inline-block;
  padding: 10px 20px;
  margin: 0 5px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s;
}

.btn-primary {
  background-color: #007bff;
  color: white;
}

.btn-secondary {
  background-color: #6c757d;
  color: white;
}

.btn-danger {
  background-color: #dc3545;
  color: white;
}

.btn:hover {
  opacity: 0.8;
  transform: translateY(-1px);
}
```

## 5. 空白折叠

### 5.1 空白折叠的概念

空白折叠是指 HTML 中的多个连续空白字符（空格、制表符、换行符）会被合并成一个空格的现象。这个现象主要发生在行盒（行块盒）内部 或 行盒（行块盒）之间。

### 5.2 空白折叠发生的位置

#### 5.2.1 行盒内部的空白折叠

```html :collapsed-lines
<!-- HTML中的多个空格 -->
<span>这里有 多个 空格</span>
<span>这里有 换行符</span>
<span>这里有 制表符</span>
```

```css :collapsed-lines
/* 默认情况下，空白会被折叠 */
.whitespace-demo {
  border: 1px solid #ccc;
  padding: 10px;
  background-color: #f9f9f9;
}

/* 控制空白处理 */
.preserve-whitespace {
  white-space: pre; /* 保留所有空白 */
}

.preserve-wrap {
  white-space: pre-wrap; /* 保留空白，允许换行 */
}

.no-wrap {
  white-space: nowrap; /* 不换行，折叠空白 */
}
```

#### 5.2.2 行盒之间的空白折叠

```html :collapsed-lines
<!-- 行盒之间的空白 -->
<span>第一个span</span>
<span>第二个span</span>

<span>第三个span</span> <span>第四个span</span>
```

```css :collapsed-lines
/* 行盒之间的空白会被折叠成一个空格 */
.inline-spacing {
  background-color: #e3f2fd;
  padding: 2px 5px;
  margin: 0 2px;
  border: 1px solid #2196f3;
}
```

#### 5.2.3 行块盒之间的空白折叠

```html :collapsed-lines
<!-- 行块盒之间也会有空白折叠 -->
<div class="inline-block-container">
  <div class="ib-item">项目1</div>
  <div class="ib-item">项目2</div>
  <div class="ib-item">项目3</div>
</div>
```

```css :collapsed-lines
.ib-item {
  display: inline-block;
  width: 80px;
  height: 60px;
  background-color: #ff9800;
  text-align: center;
  line-height: 60px;
  color: white;
}

/* 这些元素之间会有大约4px的间隙 */
```

#### 5.2.4 消除行块盒间隙的方法

```css :collapsed-lines
/* 方法1：父元素font-size设为0 */
.method-1 {
  font-size: 0;
}

.method-1 .item {
  display: inline-block;
  font-size: 16px;
}

/* 方法2：使用flexbox */
.method-2 {
  display: flex;
}

.method-2 .item {
  /* 不需要inline-block */
}

/* 方法3：浮动 */
.method-3 .item {
  float: left;
}

.method-3::after {
  content: "";
  display: table;
  clear: both;
}

/* 方法4：负边距 */
.method-4 .item {
  display: inline-block;
  margin-right: -4px; /* 具体值需要测试 */
}
```

## 6. 可替换元素和非可替换元素

### 6.1 基本概念

#### 6.1.1 非可替换元素

大部分 HTML 元素都是非可替换元素，它们在页面上显示的内容取决于元素的内容。

```html :collapsed-lines
<!-- 非可替换元素示例 -->
<p>这是一个段落，显示的内容就是这些文字</p>
<span>这是行内文本</span>
<div>这是块级内容</div>
<h1>这是标题</h1>
<strong>这是加粗文本</strong>
```

```css :collapsed-lines
/* 非可替换元素的样式 */
.non-replaced {
  /* 内容决定显示效果 */
  color: #333;
  font-size: 16px;
  background-color: #f5f5f5;
  padding: 10px;
}
```

#### 6.1.2 可替换元素

可替换元素的显示内容不是全由 CSS 内容决定的，而是由元素的属性或外部资源决定的。

```html :collapsed-lines
<!-- 可替换元素示例 -->
<img src="image.jpg" alt="图片" width="200" height="150" />
<input type="text" value="输入框的值" />
<input type="button" value="按钮文字" />
<input type="checkbox" />
<input type="radio" />
<select>
  <option>选项1</option>
  <option>选项2</option>
</select>
<textarea>文本域内容</textarea>
<video src="video.mp4" width="300" height="200"></video>
<audio src="audio.mp3"></audio>
<iframe src="page.html" width="400" height="300"></iframe>
```

### 6.2 可替换元素的特殊性

#### 6.2.1 绝大部分可替换元素均为行盒

绝大部分可替换元素均为行盒，但是它们的行为类似行块盒。

```css :collapsed-lines
/* 可替换元素默认为行盒 */
img,
input,
button,
select,
textarea {
  display: inline; /* 大多数可替换元素的默认值 */
}

/* 但它们的行为类似行块盒 */
.replaced-element {
  /* 可以设置宽高 */
  width: 200px;
  height: 100px;

  /* 可以设置所有盒模型属性 */
  padding: 10px;
  border: 2px solid #ccc;
  margin: 15px;
}
```

#### 6.2.2 盒模型中所有尺寸都有效

```css :collapsed-lines
/* 可替换元素可以设置完整的盒模型 */
.img-styled {
  width: 150px;
  height: 150px;
  padding: 10px;
  border: 3px solid #4caf50;
  margin: 20px;
  border-radius: 50%; /* 圆形图片 */
  object-fit: cover; /* 图片适应方式 */
}

.input-styled {
  width: 200px;
  height: 40px;
  padding: 8px 12px;
  border: 2px solid #2196f3;
  border-radius: 4px;
  margin: 10px 0;
  font-size: 14px;
}

.button-styled {
  width: 120px;
  height: 45px;
  padding: 0;
  border: none;
  border-radius: 6px;
  margin: 5px;
  background-color: #ff5722;
  color: white;
  cursor: pointer;
}
```

### 6.3 可替换元素的实际应用

#### 6.3.1 图片处理

```css :collapsed-lines
/* 响应式图片 */
.responsive-img {
  max-width: 100%;
  height: auto;
  display: block; /* 避免行盒的间隙问题 */
}

/* 固定尺寸图片 */
.fixed-img {
  width: 200px;
  height: 200px;
  object-fit: cover; /* 保持比例裁剪 */
  border-radius: 8px;
}

/* 圆形头像 */
.avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
```

#### 6.3.1 媒体元素

```css :collapsed-lines
/* 视频元素样式 */
.video-container {
  position: relative;
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
}

.video-container video {
  width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* 音频元素样式 */
.audio-player {
  width: 100%;
  max-width: 400px;
  margin: 20px 0;
}

/* iframe样式 */
.iframe-container {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 56.25%; /* 16:9 比例 */
}

.iframe-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 8px;
}
```

## 7. 常见问题与解决方案

### 7.1 行盒垂直对齐问题

**问题**：行盒在垂直方向上对齐不一致

```css :collapsed-lines
/* 问题代码 */
.misaligned {
  display: inline;
  font-size: 20px;
  /* 没有设置vertical-align */
}

/* 解决方案 */
.aligned {
  display: inline;
  vertical-align: baseline; /* 基线对齐 */
  /* 或者使用其他对齐方式 */
  vertical-align: top; /* 顶部对齐 */
  vertical-align: middle; /* 中间对齐 */
  vertical-align: bottom; /* 底部对齐 */
}
```

### 7.2 图片底部间隙问题

**问题**：图片底部出现不明间隙

```css :collapsed-lines
/* 问题：图片默认是inline，会有基线间隙 */
img {
  /* 默认display: inline */
}

/* 解决方案1：改为块级元素 */
.img-block {
  display: block;
}

/* 解决方案2：设置vertical-align */
.img-aligned {
  vertical-align: top;
  /* 或者 vertical-align: bottom; */
}

/* 解决方案3：设置父元素font-size为0 */
.img-container {
  font-size: 0;
}
```

### 7.3 可替换元素尺寸问题

**问题**：可替换元素尺寸不符合预期

```css :collapsed-lines
/* 问题：图片变形 */
.distorted-img {
  width: 200px;
  height: 100px;
  /* 图片可能会变形 */
}

/* 解决方案：使用object-fit */
.fitted-img {
  width: 200px;
  height: 100px;
  object-fit: cover; /* 保持比例，裁剪多余部分 */
  object-fit: contain; /* 保持比例，完整显示 */
  object-fit: fill; /* 填充整个容器，可能变形 */
}
```
